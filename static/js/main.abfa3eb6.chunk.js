(this["webpackJsonpschool-task-axios-ls"]=this["webpackJsonpschool-task-axios-ls"]||[]).push([[0],{33:function(e,t,s){},34:function(e,t,s){},60:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),i=s(26),a=s.n(i),r=(s(33),s(34),s(9)),l=s(2),j=s(11),d=s(27),o=s.n(d),h=s(8),b=s.n(h),O=s(1),m=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),s=t[0],c=t[1],i=localStorage.getItem("animals");Object(n.useEffect)((function(){!function(){if(i){var e=JSON.parse(i);c(e)}else o.a.get("https://animals.azurewebsites.net/api/animals").then((function(e){c(e.data),localStorage.setItem("animals",JSON.stringify(e.data))}))}()}),[]);var a=s.map((function(e){return Object(O.jsxs)("li",{children:[Object(O.jsx)("h3",{children:e.name}),Object(O.jsx)("img",{src:e.imageUrl,alt:"",height:"100px"}),Object(O.jsx)("p",{children:e.shortDescription}),Object(O.jsx)(r.b,{to:"/animal/"+e.id,className:"showmore",children:"Visa mer"}),Object(O.jsx)("hr",{})]},e.id)})),l=s.map((function(e){if(b()(e.lastFed).isBefore(b()().subtract(4,"hours")))return Object(O.jsxs)("li",{children:[Object(O.jsx)("h3",{children:e.name}),Object(O.jsx)(r.b,{to:"/animal/"+e.id,className:"varningBtn",children:"Feed me now!"})]},e.id)}));return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{children:Object(O.jsx)("ul",{children:a})}),Object(O.jsxs)("div",{className:"hungry",children:[l.length>0?Object(O.jsx)("h3",{className:"danger",children:"Warning"}):null,Object(O.jsx)("ul",{children:l})]})]})})},u=function(){var e=Object(l.f)().id,t=Object(n.useState)({id:"",name:"",latinName:"",yearOfBirth:"",shortDescription:"",longDescription:"",imageUrl:"",medicine:"",isFed:!1,lastFed:""}),s=Object(j.a)(t,2),c=s[0],i=s[1],a=localStorage.getItem("animals"),d=Object(n.useState)(a),o=Object(j.a)(d,2),h=(o[0],o[1]);Object(n.useEffect)((function(){if(null!==a)for(var t=JSON.parse(a),s=0;s<t.length;s++)t[s].id==e&&(b()(t[s].lastFed).isBefore(b()().subtract(3,"hours"))&&(t[s].isFed=!1,localStorage.setItem("animals",JSON.stringify(t)),h(t)),i(t[s]))}),[e,a]);var m=Object(n.useState)(""),u=Object(j.a)(m,2),x=u[0],f=u[1];return Object(n.useEffect)((function(){if(null!==a)for(var t=JSON.parse(a),s=0;s<t.length;s++)t[s].id==e&&b()(c.lastFed).isBefore(b()().subtract(4,"hours"))&&f("FEED ME NOW")})),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("h2",{children:c.name}),Object(O.jsx)("img",{src:c.imageUrl,alt:"",width:"200"}),Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Latin name: "})," ",c.latinName]}),Object(O.jsx)("p",{children:Object(O.jsx)("strong",{children:"Description: "})}),Object(O.jsxs)("p",{children:[" ",c.longDescription]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Need food? "})," ",c.isFed?"No":"Yes"]}),Object(O.jsx)("button",{onClick:function(){if(null!==a)for(var t=JSON.parse(a),s=0;s<t.length;s++)t[s].id==e&&(t[s].isFed=!0,t[s].lastFed=new Date,localStorage.setItem("animals",JSON.stringify(t)),i(t))},disabled:c.isFed,children:"Feed me now"}),Object(O.jsx)("h3",{children:x}),Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Last fed: "}),b()(c.lastFed).format("MMMM Do YYYY, h:mm a")]}),Object(O.jsx)(r.b,{to:"/",children:"Tillbaka"})]})};var x=function(){return Object(O.jsx)(r.a,{children:Object(O.jsxs)(l.c,{children:[Object(O.jsxs)(l.a,{exact:!0,path:"/",children:[Object(O.jsx)("div",{className:"nav",children:Object(O.jsx)("h1",{children:"Animals"})}),Object(O.jsx)(m,{})]}),Object(O.jsxs)(l.a,{path:"/animal/:id",children:[Object(O.jsx)("div",{className:"nav",children:Object(O.jsx)("h1",{children:"Animal details"})}),Object(O.jsx)(u,{})]})]})})},f=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,61)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),i(e),a(e)}))};a.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(x,{})}),document.getElementById("root")),f()}},[[60,1,2]]]);
//# sourceMappingURL=main.abfa3eb6.chunk.js.map